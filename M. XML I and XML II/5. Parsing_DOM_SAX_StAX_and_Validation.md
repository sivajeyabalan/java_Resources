## 1. Topic Overview

Java provides multiple XML parsing APIs: DOM (tree-based), SAX (event-driven), and StAX (pull parser). Validation can be performed against DTD or XSD.

## 2 . Topic definition

- **DOM**: Loads entire XML into memory; easy traversal and updates.
- **SAX**: Streaming, push-based events; minimal memory; read-only.
- **StAX**: Streaming, pull-based; developer controls iteration.
- **Validation**: `javax.xml.validation` API with XSD.

## 3. Deep Dive with Examples

DOM parse:
```java
DocumentBuilderFactory f = DocumentBuilderFactory.newInstance();
DocumentBuilder b = f.newDocumentBuilder();
Document doc = b.parse(new File("invoice.xml"));
String customer = doc.getElementsByTagName("customer").item(0).getTextContent();
```

SAX parse (handler sketch):
```java
SAXParserFactory spf = SAXParserFactory.newInstance();
SAXParser parser = spf.newSAXParser();
DefaultHandler h = new DefaultHandler() {
  public void startElement(String uri,String l,String q,Attributes a){}
  public void characters(char[] ch,int s,int l){}
};
parser.parse(new File("invoice.xml"), h);
```

StAX parse:
```java
XMLInputFactory xif = XMLInputFactory.newFactory();
XMLStreamReader r = xif.createXMLStreamReader(new FileInputStream("invoice.xml"));
while (r.hasNext()) {
  int e = r.next();
  if (e == XMLStreamConstants.START_ELEMENT && r.getLocalName().equals("customer")) {
    System.out.println(r.getElementText());
  }
}
```

XSD validation:
```java
SchemaFactory sf = SchemaFactory.newInstance("http://www.w3.org/2001/XMLSchema");
Schema schema = sf.newSchema(new File("invoice.xsd"));
Validator v = schema.newValidator();
v.validate(new StreamSource(new File("invoice.xml")));
```

## 4. Best Practices & Pitfalls

- Choose SAX/StAX for large files; DOM for convenience on small docs.
- Secure parser features to prevent XXE: disable external entities.
- Reuse parsers and schema instances; avoid re-creating per request.

## 5. Summary

- DOM/SAX/StAX cover different performance and memory needs; validation ensures correctness.

## 6. Tricky Interview Questions

1) When would you prefer StAX over SAX and why?
2) How do you protect XML parsers from XXE and entity expansion attacks?
