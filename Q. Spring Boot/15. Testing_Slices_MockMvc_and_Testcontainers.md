## 1. Topic Overview

- Spring Boot testing slices speed up tests by loading only needed parts; MockMvc tests web layers; Testcontainers enables real DB tests.

## 2 . Topic definition

- WHAT: `@WebMvcTest`, `@DataJpaTest`, `@SpringBootTest`, MockMvc, Testcontainers for integration tests.
- WHY: Fast feedback with focused tests, realistic integration with minimal friction.
- HOW: Choose slices for unit-ish tests; use MockMvc for controller tests; spin DB in Docker using Testcontainers.
- WHEN/WHERE: CI pipelines and local development for reliable tests.
- WHAT IF: Overusing `@SpringBootTest` slows test suite; mocking too much reduces confidence.

## 3. Deep Dive with Examples

```java
// Controller slice with MockMvc
import org.junit.jupiter.api.Test;
import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.web.servlet.MockMvc;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;

@WebMvcTest
class HelloControllerTest {
    @Autowired MockMvc mvc;
    @Test void hello() throws Exception {
        mvc.perform(get("/hello")).andExpect(status().isOk());
    }
}
```

```java
// JPA slice
import org.junit.jupiter.api.Test;
import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;
import org.springframework.beans.factory.annotation.Autowired;

@DataJpaTest
class RepoTest {
    @Autowired MyRepository repo;
    @Test void savesAndFinds() { /* repo.save(...) */ }
}
```

```java
// Testcontainers with PostgreSQL
import org.junit.jupiter.api.*;
import org.testcontainers.containers.PostgreSQLContainer;

class PgIntegrationTest {
    static PostgreSQLContainer<?> pg = new PostgreSQLContainer<>("postgres:16");
    @BeforeAll static void start() { pg.start(); System.setProperty("spring.datasource.url", pg.getJdbcUrl()); }
    @AfterAll static void stop() { pg.stop(); }
}
```

## 4. Best Practices & Pitfalls

- Keep tests deterministic; seed data explicitly.
- Use slices to keep most tests fast; reserve full `@SpringBootTest` for cross-cutting scenarios.
- Reuse containers across tests where possible to speed up builds.

## 5. Summary

- Combine slices, MockMvc, and Testcontainers for a fast and reliable Spring Boot test strategy.

## 6. Tricky Interview Questions

1. When to choose `@WebMvcTest` vs `@SpringBootTest`?
2. How to wire Testcontainers with Spring Boot properties automatically?

