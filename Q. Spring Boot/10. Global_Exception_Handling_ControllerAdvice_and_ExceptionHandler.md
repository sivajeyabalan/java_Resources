## 1. Topic Overview

Centralize error handling for REST/MVC using `@ControllerAdvice` and `@ExceptionHandler` to produce consistent error responses and logs.

## 2 . Topic definition

- **@ControllerAdvice**: Cross-cutting component for controllers.
- **@ExceptionHandler**: Maps exceptions to handler methods.
- **ResponseEntityExceptionHandler**: Base class with common handlers to override.

## 3. Deep Dive with Examples

```java
@ControllerAdvice
class GlobalErrors extends ResponseEntityExceptionHandler {
  @ExceptionHandler(EntityNotFoundException.class)
  ResponseEntity<Map<String,Object>> notFound(EntityNotFoundException ex) {
    return ResponseEntity.status(HttpStatus.NOT_FOUND)
      .body(Map.of("error","NOT_FOUND","message", ex.getMessage()));
  }

  @Override
  protected ResponseEntity<Object> handleMethodArgumentNotValid(MethodArgumentNotValidException ex, HttpHeaders headers, HttpStatusCode status, WebRequest request) {
    var errors = ex.getBindingResult().getFieldErrors().stream()
      .map(e -> Map.of("field", e.getField(), "message", e.getDefaultMessage()))
      .toList();
    return ResponseEntity.badRequest().body(Map.of("error","VALIDATION","details", errors));
  }
}
```

## 4. Best Practices & Pitfalls

- Return structured error payloads with codes, messages, and correlation IDs.
- Log server-side with appropriate levels; avoid leaking stack traces to clients.
- Pitfall: Catch-all 500 masks real issuesâ€”handle specific exceptions first.

## 5. Summary

- Use `@ControllerAdvice` and targeted handlers for predictable API error responses.

## 6. Tricky Interview Questions

1) How to include a correlation ID across logs and error responses?
2) How to localize validation error messages?
