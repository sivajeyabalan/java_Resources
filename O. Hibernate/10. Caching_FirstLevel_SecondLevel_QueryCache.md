## 1. Topic Overview

Caching reduces database load. Hibernate has a mandatory first-level cache (per Session) and optional second-level cache (shared across sessions), plus a query cache.

## 2 . Topic definition

- **First-level cache**: Persistence context; identity map per Session.
- **Second-level cache**: Pluggable providers (Ehcache, Infinispan); caches entities/collections.
- **Query cache**: Caches query result IDs; depends on 2nd-level cache for entities.

## 3. Deep Dive with Examples

Enable second-level cache (example):
```properties
hibernate.cache.use_second_level_cache=true
hibernate.cache.use_query_cache=true
hibernate.cache.region.factory_class=org.hibernate.cache.jcache.JCacheRegionFactory
```

```java
// Cacheable entity
@Entity @Cacheable @org.hibernate.annotations.Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
class Product { /* ... */ }
```

## 4. Best Practices & Pitfalls

- Cache reference data (read-mostly); avoid caching volatile entities.
- Choose appropriate concurrency strategy (READ_ONLY, NONSTRICT_READ_WRITE, READ_WRITE).
- Pitfall: Query cache invalidation on updates; measure before enabling broadly.

## 5. Summary

- Use first-level cache always; adopt 2nd-level/query cache selectively for read-mostly data.

## 6. Tricky Interview Questions

1) How does the query cache interact with the second-level cache?
2) When can caching degrade performance or consistency?
