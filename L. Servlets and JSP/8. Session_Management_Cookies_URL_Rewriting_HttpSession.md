## 1. Topic Overview

HTTP is stateless; web apps maintain user state using cookies, URL rewriting, hidden fields, and server-side sessions (`HttpSession`).

## 2 . Topic definition

- **Cookie**: Small name/value pair stored in the browser, sent with requests.
- **Session**: Server-side state keyed by a session ID (JSESSIONID) usually in a cookie.
- **URL Rewriting**: Appends `;jsessionid=...` to URLs when cookies are disabled.

## 3. Deep Dive with Examples

```java
// Creating a session and storing data
HttpSession session = req.getSession(true);
session.setAttribute("userId", 42L);

// Reading and invalidating
Long userId = (Long) session.getAttribute("userId");
session.invalidate();
```

```java
// Cookie example
Cookie theme = new Cookie("theme", "dark");
theme.setHttpOnly(true);
theme.setMaxAge(7 * 24 * 3600);
resp.addCookie(theme);
```

```jsp
<!-- URL rewriting support in links -->
<a href="<%= response.encodeURL("/profile") %>">Profile</a>
```

## 4. Best Practices & Pitfalls

- Set `HttpOnly`, `Secure`, `SameSite` on sensitive cookies.
- Keep session small; prefer identifiers to full objects; set timeout appropriately.
- Avoid storing authentication/authorization logic directly in session objects.
- Pitfall: Forgetting to call `response.encodeURL` when cookies are off.

## 5. Summary

- Sessions track user state; cookies carry identifiers.
- Secure cookies and minimize session footprint.

## 6. Tricky Interview Questions

1) How do you handle session fixation? Show steps to rotate the session ID.
2) What breaks when the user disables cookies? How do you mitigate it?
