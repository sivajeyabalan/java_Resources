## 1. Topic Overview

Java web apps run inside a web/application server that implements the Servlet spec (e.g., Tomcat, Jetty) or full Jakarta EE (e.g., WildFly, Payara). Apps are packaged typically as WARs and configured via annotations and/or deployment descriptors like `web.xml`.

## 2 . Topic definition

- **Web server vs Application server**: Web servers primarily serve static content; application servers implement Jakarta EE APIs and manage components (Servlets, JSP, JPA, JMS, etc.). Tomcat is a servlet container (often called a web server); WildFly is a full application server.
- **WAR/JAR/EAR**: `WAR` (Web ARchive) packages web-tier code/resources; `JAR` holds libraries/classes; `EAR` bundles multiple modules (WARs, EJB JARs) for enterprise deployments.
- **Deployment Descriptor**: `web.xml` is an XML file describing servlets, mappings, filters, listeners, welcome files, error pages, security constraints.
- **Annotations**: `@WebServlet`, `@WebFilter`, `@WebListener` complement/replace parts of `web.xml`.

## 3. Deep Dive with Examples

### Minimal web.xml
```xml
<web-app xmlns="https://jakarta.ee/xml/ns/jakartaee" version="5.0">
  <display-name>demo</display-name>
  <servlet>
    <servlet-name>home</servlet-name>
    <servlet-class>web.HomeServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>home</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <error-page>
    <error-code>404</error-code>
    <location>/WEB-INF/views/404.jsp</location>
  </error-page>
  <session-config>
    <session-timeout>30</session-timeout>
  </session-config>
</web-app>
```

### WAR structure
```
demo.war
  |-- WEB-INF/
  |     |-- web.xml
  |     |-- classes/ (compiled .class)
  |     |-- lib/ (dependency JARs)
  |-- index.jsp
  |-- static/
```

### Annotation mapping
```java
@WebServlet(urlPatterns = "/home")
public class HomeServlet extends HttpServlet { /* ... */ }
```

## 4. Best Practices & Pitfalls

- Use annotations for simple cases; keep `web.xml` for cross-cutting config (welcome files, error pages, security) and for portability.
- Keep libraries in `WEB-INF/lib`; never expose them under the web root.
- Align versions: container’s Jakarta Servlet API must match your code’s imports.
- Pitfall: Mixing legacy `javax.servlet.*` with `jakarta.servlet.*` on new containers.

## 5. Summary

- Containers host WARs, manage lifecycle, and route requests.
- Use annotations and/or `web.xml` to configure components and app behavior.

## 6. Tricky Interview Questions

1) When would you prefer `web.xml` over annotations? Give concrete scenarios.
2) Explain classloading in a WAR (parent-first vs child-first implications).
3) What breaks when deploying a `javax.*` WAR on a `jakarta.*` container?
