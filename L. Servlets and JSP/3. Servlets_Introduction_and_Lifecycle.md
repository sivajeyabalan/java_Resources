## 1. Topic Overview

Servlets are Java classes managed by the container to handle HTTP requests. The container creates, initializes, and reuses servlet instances, invoking lifecycle methods: `init`, `service` (which dispatches to `doGet`, `doPost`, etc.), and `destroy`.

## 2 . Topic definition

- **Servlet**: Server-side component extending `HttpServlet`, receiving `HttpServletRequest/Response`.
- **Lifecycle**: `init()` once per servlet instance, `service()` per request, `destroy()` when unloading.
- **Threading**: Default is multithreaded—one instance, many threads calling `service()` concurrently.

## 3. Deep Dive with Examples

### Lifecycle demo
```java
@WebServlet(urlPatterns = "/lifecycle")
public class LifecycleServlet extends HttpServlet {
    @Override
    public void init() { System.out.println("init once"); }
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {
        resp.getWriter().println("Handled by " + Thread.currentThread().getName());
    }
    @Override
    public void destroy() { System.out.println("destroy once"); }
}
```

### doGet vs doPost
```java
@WebServlet("/submit")
public class SubmitServlet extends HttpServlet {
    @Override protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {
        resp.setContentType("text/html");
        resp.getWriter().write("<form method='post'>Name: <input name='n'/><button>Send</button></form>");
    }
    @Override protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException, ServletException {
        String name = req.getParameter("n");
        req.setAttribute("name", name);
        req.getRequestDispatcher("/WEB-INF/views/hello.jsp").forward(req, resp);
    }
}
```

## 4. Best Practices & Pitfalls

- Avoid mutable instance fields; use locals or thread-safe structures only.
- Set response content type and character encoding.
- Prefer `@WebServlet` unless centralizing config in `web.xml`.
- Pitfall: Performing expensive work in `doGet/doPost` repeatedly—init caches/resources in `init()`.

## 5. Summary

- Container manages servlet lifecycle; requests hit `service()` then `doXXX`.
- Be thread-safe; avoid shared mutable state in servlets.

## 6. Tricky Interview Questions

1) When is a servlet instance created and how many instances exist by default?
2) Why are instance variables dangerous in servlets? Provide a safe alternative.
3) How would you share heavy resources (e.g., DB pool) across servlets safely?
